<mat-sidenav-container
  [ngClass]="{
    'sidenav-container-collapsed': !sidenavExpanded,
  }"
>
  <!-- Sidebar navigation -->
  <mat-sidenav
    #sidenav="matSidenav"
    [ngClass]="{
      'mat-elevation-z8': true,
      'sidenav-collapsed': !sidenavExpanded,
    }"
    [mode]="isMobile ? 'over' : 'side'"
    [opened]="!isMobile"
  >
    <!-- Mobile close button - only visible on mobile -->
    <div class="mobile-close-container" *ngIf="isMobile">
      <button
        mat-icon-button
        class="mobile-close-btn"
        (click)="closeMobileMenu()"
      >
        <mat-icon>close</mat-icon>
      </button>
    </div>

    <!-- Desktop nav header - expanded state -->
    <div class="navbar-title" *ngIf="sidenavExpanded && !isMobile">
      <mat-icon class="logo-icon">admin_panel_settings</mat-icon>
      <h2>{{ title }}</h2>
      <button mat-icon-button class="toggle-sidenav" (click)="toggleSidenav()">
        <mat-icon>chevron_left</mat-icon>
      </button>
    </div>

    <!-- Desktop nav header - collapsed state -->
    <div class="collapsed-content" *ngIf="!sidenavExpanded && !isMobile">
      <div class="navbar-title-minimal">
        <mat-icon class="logo-icon">admin_panel_settings</mat-icon>
      </div>
      <div class="toggle-container-collapsed">
        <button
          mat-icon-button
          class="toggle-sidebar-center-btn"
          (click)="toggleSidenav()"
        >
          <mat-icon>chevron_right</mat-icon>
        </button>
      </div>
    </div>

    <mat-divider></mat-divider>    

    <!-- Mobile nav header -->
    <div class="navbar-title mobile-title" *ngIf="isMobile">
      <mat-icon class="logo-icon">admin_panel_settings</mat-icon>
      <h2>{{ title }}</h2>
    </div>

    <!-- Content for expanded state -->
    <div class="expanded-content" *ngIf="sidenavExpanded">
      <mat-divider></mat-divider>

      <!-- User info -->
      <div class="user-info">
        <h5 class="name">{{ userDetailsName }}</h5>
        <h6 class="name email">{{ userDetailsEmail }}</h6>
        <h6 class="name role">{{ user_role }}</h6>
      </div>

      <!-- Minimal toggle button - shown only when expanded -->
      <div class="toggle-container desktop-only">
        <button
          mat-icon-button
          class="toggle-sidebar-minimal-btn"
          (click)="toggleSidenav()"
        >
          <mat-icon>chevron_left</mat-icon>
        </button>
      </div>

      <mat-divider class="desktop-only"></mat-divider>
    </div>

    <!-- Navigation buttons -->
    <!-- View Users btn -->
    <button
      mat-button
      class="menu-button"
      routerLink="/admin/dashboard"
      routerLinkActive="is-active"
    >
      <mat-icon>visibility</mat-icon
      ><span class="item" *ngIf="sidenavExpanded">View Users</span>
    </button>

    <mat-divider></mat-divider>
    
    <!-- Add Users btn -->
    <button
      mat-button
      class="menu-button"
      routerLink="/admin/dashboard"
      routerLinkActive="is-active"
    >
      <mat-icon>add_circle</mat-icon
      ><span class="item" *ngIf="sidenavExpanded">Add Users</span>
    </button>    

    <mat-divider></mat-divider>

    <!-- Edit/Delete Users btn -->
    <button
      mat-button
      class="menu-button"
      routerLink="/admin/dashboard"
      routerLinkActive="is-active"
    >
      <mat-icon>create</mat-icon
      ><span class="item" *ngIf="sidenavExpanded">Edit/Delete Users</span>
    </button>

    <mat-divider></mat-divider>    

    <!-- Edit/Delete Users btn -->
    <button
      mat-button
      class="menu-button"
      routerLink="/admin/dashboard"
      routerLinkActive="is-active"
    >
      <mat-icon>insert_drive_file</mat-icon
      ><span class="item" *ngIf="sidenavExpanded">Reports</span>
    </button>

    <mat-divider></mat-divider>    

    <!-- Logout button -->
    <button mat-button class="menu-button logout-button" (click)="Logout()">
      <mat-icon>logout</mat-icon
      ><span class="item" *ngIf="sidenavExpanded">Logout</span>
    </button>
  </mat-sidenav>

  <!-- Main content -->
  <mat-sidenav-content
    [ngClass]="{
      'content-expanded': !sidenavExpanded && sidenav.mode === 'side',
    }"
  >
    <!-- Mobile header inside content -->
    <mat-toolbar class="mobile-header" *ngIf="isMobile">
      <span class="mobile-title">Admin Panel</span>
      <button
        mat-icon-button
        class="mobile-menu-button"
        (click)="toggleMobileMenu()"
      >
        <mat-icon>menu</mat-icon>
      </button>
    </mat-toolbar>

    <!-- Add padding container to prevent content overlap -->
    <div
      class="main-content-wrapper"
      [ngClass]="{ 'mobile-content': isMobile }"
    >
      <ng-content></ng-content>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
